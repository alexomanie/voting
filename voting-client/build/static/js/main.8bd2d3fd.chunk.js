(this["webpackJsonpcp-voting-react"]=this["webpackJsonpcp-voting-react"]||[]).push([[0],{101:function(e,t){},107:function(e,t,n){},124:function(e,t,n){"use strict";n.r(t);var c=n(0),o=n.n(c),r=n(58),a=n.n(r),i=n(9),u=n(27),l=n(6),s=n.n(l),d=n(14),f=n(18),p=n(59),b=n.n(p),h=n(63),m=n(1),j=n(125),x=n(19),v=(n(107),o.a.memo((function(e){var t=e.question,n=e.handleVote,c=e.handleComplete,o=e.handleDelete,r=Object(h.a)(e,["question","handleVote","handleComplete","handleDelete"]);return Object(m.c)(x.a,{flipId:t._id},Object(m.c)("div",Object.assign({sx:{variant:!1===t.complete?"cards.question":"cards.complete"}},r),Object(m.c)(j.e,{sx:{flexDirection:"row",alginItems:"center",justifyContent:"space-between"}},Object(m.c)(j.j,{sx:{width:"100%"}},t.text),!1===t.complete&&Object(m.c)(j.e,{sx:{width:"128px",height:"48px",display:"flex",flexDirection:"row",alginItems:"center",justifyContent:"flex-end"}},Object(m.c)(j.j,{sx:{alignSelf:"center",fontSize:"2"}},t.votes),Object(m.c)(j.f,{sx:{height:"45px",width:"50px",cursor:"pointer","&:focus":{outline:"none"}},onClick:function(){return n(t._id)}},Object(m.c)("div",{className:"heart"})))),!1===t.complete&&Object(m.c)(j.e,{sx:{justifyContent:"flex-end"}},Object(m.c)(j.b,{onClick:function(){return c(t._id)}},"Beantwortet")),!0===t.complete&&Object(m.c)(j.e,{sx:{justifyContent:"flex-end"}},Object(m.c)(j.b,{onClick:function(){return o(t._id)}},"L\xf6schen"))))}))),g=n(15),O=n.n(g),w=function(e){var t=e.handleClick,n=Object(c.useState)(""),r=Object(f.a)(n,2),a=r[0],i=r[1];return o.a.createElement("div",null,o.a.createElement(j.e,null,o.a.createElement(j.h,{placeholder:"Frage eingeben",sx:{marginRight:3},value:a,onChange:function(e){return i(e.target.value)}}),o.a.createElement(j.b,{onClick:function(){t(a),i("")}},"Frage abschicken")))},y=function(e){var t=e.membersOnline;return Object(m.c)(j.c,{sx:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",variant:"cards.question",marginBottom:4,py:1,backgroundColor:""}},Object(m.c)(j.g,{sx:{width:"48px",height:"48px",marginRight:3},src:"logo.png"}),Object(m.c)(j.i,{to:"/",sx:{variant:"styles.navlink",fontSize:5,fontWeight:"bold"}},"CP Q & A"),Object(m.c)("div",{sx:{mx:"auto"}}),Object(m.c)(j.e,{sx:{flexDirection:"row",alignItems:"center",height:"24px",justifyContent:"center"}},Object(m.c)(j.j,{sx:{alignSelf:"center"}},"online: ",t),Object(m.c)(j.a,{sx:{width:"16px",height:"16px"},"aria-label":"Toggle dark mode"},Object(m.c)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:"16",height:"16",fill:"currentcolor"},Object(m.c)("circle",{r:4,cx:8,cy:6,fill:"#6da40c",strokeWidth:0})))))};var k=function(){var e=Object(c.useRef)(null),t=Object(c.useState)(0),n=Object(f.a)(t,2),o=n[0],r=n[1],a=Object(c.useState)([]),l=Object(f.a)(a,2),p=l[0],h=l[1];Object(c.useEffect)((function(){return e.current=b()("http://localhost:4000"),function(){e.current.disconnect()}}),[]),Object(c.useEffect)((function(){var t=function(){var e=Object(d.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O()("http://localhost:4000/api/v1/questions");case 2:t=e.sent,h(t.data.sort((function(e,t){return t.votes-e.votes})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e.current.on("question",(function(e){h((function(t){return[].concat(Object(u.a)(t),[e])}))})),e.current.on("delete",(function(e){h((function(t){return t.filter((function(t){return t._id!==e}))}))})),e.current.on("complete",(function(e){h((function(t){return Object(u.a)(t).map((function(t){return t._id===e._id?Object(i.a)(Object(i.a)({},t),{},{complete:e.complete}):t})).sort((function(e,t){return t.votes-e.votes}))}))})),e.current.on("vote",(function(e){console.log(e),h((function(t){return console.log(t),Object(u.a)(t).map((function(t){return t._id===e._id?Object(i.a)(Object(i.a)({},t),{},{votes:e.votes}):t})).sort((function(e,t){return t.votes-e.votes}))}))})),t(),e.current.on("users",(function(e){console.log("received users event! ",e),r(e)}))}),[]);var g=function(){var e=Object(d.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.post("http://localhost:4000/api/v1/questions",{text:t});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(d.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.put("http://localhost:4000/api/v1/questions/".concat(t,"/votes"));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(d.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.put("http://localhost:4000/api/v1/questions/".concat(t,"/complete"));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(d.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.delete("http://localhost:4000/api/v1/questions/".concat(t,"/"));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(m.c)("div",{sx:{display:"flex",flexDirection:"column",minHeight:"100vh"}},Object(m.c)("div",{sx:{marginTop:3,width:"9/12",mx:"auto",flex:"1 1 auto"}},Object(m.c)(j.d,null,Object(m.c)(y,{membersOnline:o})),Object(m.c)(j.d,{sx:{mb:3}},Object(m.c)(w,{handleClick:g})),Object(m.c)(j.d,null,Object(m.c)(x.b,{spring:"noWobble",flipKey:p.map((function(e){return e._id})).join("")},Object(m.c)(x.a,{flipId:"list"},Object(m.c)("div",null,Object(m.c)("div",null,p.filter((function(e){return!1===e.complete})).map((function(e,t){return Object(m.c)(v,{index:t,key:e._id,handleVote:k,handleComplete:C,question:e})}))),Object(m.c)("div",null,p.filter((function(e){return!0===e.complete})).map((function(e,t){return Object(m.c)(v,{index:t,key:e._id,handleVote:k,handleComplete:C,handleDelete:S,question:e})})))))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var C=n(11),S=Object(m.d)(C.a,{colors:{primary:C.a.colors.blue[6],secondary:C.a.colors.orange[6],muted:C.a.colors.gray[6],textMuted:"#69778c",cpGreen:"#6da40c",background:C.a.colors.gray[2]},styles:{a:{color:"cpGreen",textDecoration:"none",transition:"all 0.3s ease-in-out",cursor:"pointer"}},buttons:{primary:Object(i.a)(Object(i.a)({},{py:2,px:3,cursor:"pointer",fontSize:"100%",lineHeight:"inherit"}),{},{backgroundColor:"white",borderWidth:"1px",borderStyle:"solid",borderColor:"gray.4",color:"text",fontWeight:"bold",borderRadius:"default",boxShadow:"default","&:hover":{backgroundColor:"gray.1"},"&:focus":{outline:"none"}})},cards:{question:{background:"white",borderRadius:"default",boxShadow:"default",p:3,mb:3},complete:{background:C.a.colors.gray[3],borderRadius:"default",boxShadow:"default",p:3,mb:3},icon:{svg:{width:8,borderRadius:"full",p:2,background:"white",".primary":{fill:"currentColor",color:"primary"},".secondary":{fill:"currentColor",color:"blue.8"}}},label:{boxShadow:"default",background:"white",px:3,py:2,borderRadius:"lg",ml:2,fontSize:0,fontWeight:"semibold"}}}),q=n(126);a.a.render(o.a.createElement(q.a,{theme:S},o.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},64:function(e,t,n){e.exports=n(124)}},[[64,1,2]]]);
//# sourceMappingURL=main.8bd2d3fd.chunk.js.map